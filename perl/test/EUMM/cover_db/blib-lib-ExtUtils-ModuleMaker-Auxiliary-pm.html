<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 0.63
Devel::Cover is copyright 2001-2006, Paul Johnson (pjcj@cpan.org)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c1">80.0%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>pod</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package ExtUtils::ModuleMaker::Auxiliary;</td></tr>
<tr><td class="h">2</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#$Id: Auxiliary.pm 1153 2007-03-28 00:06:01Z jimk $</td></tr>
<tr><td class="h">3</td><td><div class="c3">95</div><div class="c3">95</div><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L3">95</a></div></td><td></td><td><div>1453</div><div>731</div><div>1261</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">4</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Contains test subroutines for distribution with ExtUtils::ModuleMaker</td></tr>
<tr><td class="h">5</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">local $^W = 1;</td></tr>
<tr><td class="h">6</td><td><div class="c3">95</div><div class="c3">95</div><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L6">95</a></div></td><td></td><td><div>2001</div><div>677</div><div>1743</div></td><td class="s">use vars qw( $VERSION @ISA @EXPORT_OK );</td></tr>
<tr><td class="h">7</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">$VERSION = 0.49;</td></tr>
<tr><td class="h">8</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">require Exporter;</td></tr>
<tr><td class="h">9</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">@ISA         = qw(Exporter);</td></tr>
<tr><td class="h">10</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">@EXPORT_OK   = qw(</td></tr>
<tr><td class="h">11</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;read_file_string</td></tr>
<tr><td class="h">12</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;read_file_array</td></tr>
<tr><td class="h">13</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;six_file_tests</td></tr>
<tr><td class="h">14</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;check_MakefilePL </td></tr>
<tr><td class="h">15</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;check_pm_file</td></tr>
<tr><td class="h">16</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;make_compact</td></tr>
<tr><td class="h">17</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;failsafe</td></tr>
<tr><td class="h">18</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;licensetest</td></tr>
<tr><td class="h">19</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_process_personal_defaults_file </td></tr>
<tr><td class="h">20</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_reprocess_personal_defaults_file </td></tr>
<tr><td class="h">21</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_get_els</td></tr>
<tr><td class="h">22</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_subclass_preparatory_tests</td></tr>
<tr><td class="h">23</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_subclass_cleanup_tests</td></tr>
<tr><td class="h">24</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_save_pretesting_status</td></tr>
<tr><td class="h">25</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_restore_pretesting_status</td></tr>
<tr><td class="h">26</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">); </td></tr>
<tr><td class="h">27</td><td><div class="c3">95</div><div class="c3">95</div><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L27">95</a></div></td><td></td><td><div>1463</div><div>758</div><div>1627</div></td><td class="s">use Carp;</td></tr>
<tr><td class="h">28</td><td><div class="c3">95</div><div class="c3">95</div><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L28">95</a></div></td><td></td><td><div>3940</div><div>1712</div><div>4008</div></td><td class="s">use Cwd;</td></tr>
<tr><td class="h">29</td><td><div class="c3">95</div><div class="c3">95</div><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L29">95</a></div></td><td></td><td><div>1943</div><div>1612</div><div>2587</div></td><td class="s">use File::Copy;</td></tr>
<tr><td class="h">30</td><td><div class="c3">95</div><div class="c3">95</div><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L30">95</a></div></td><td></td><td><div>2502</div><div>1818</div><div>1929</div></td><td class="s">use File::Path;</td></tr>
<tr><td class="h">31</td><td><div class="c3">95</div><div class="c3">95</div><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L31">95</a></div></td><td></td><td><div>1357</div><div>637</div><div>1659</div></td><td class="s">use File::Spec;</td></tr>
<tr><td class="h">32</td><td><div class="c3">95</div><div class="c3">95</div><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L32">95</a></div></td><td></td><td><div>1424</div><div>1819</div><div>3728</div></td><td class="s">use File::Temp qw| tempdir |;</td></tr>
<tr><td class="h">33</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">*ok = *Test::More::ok;</td></tr>
<tr><td class="h">34</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">*is = *Test::More::is;</td></tr>
<tr><td class="h">35</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">*like = *Test::More::like;</td></tr>
<tr><td class="h">36</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">*copy = *File::Copy::copy;</td></tr>
<tr><td class="h">37</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">*move = *File::Copy::move;</td></tr>
<tr><td class="h">38</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>1385</div></td><td class="s">use File::Save::Home qw(</td></tr>
<tr><td class="h">39</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;get_subhome_directory_status</td></tr>
<tr><td class="h">40</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;make_subhome_directory</td></tr>
<tr><td class="h">41</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;restore_subhome_directory_status</td></tr>
<tr><td class="h">42</td><td><div class="c3">95</div><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L42">95</a></div></td><td></td><td><div>1928</div><div>2196</div></td><td class="s">);</td></tr>
<tr><td class="h">43</td><td colspan="7"></td></tr><tr><td class="h">44 - 65</td><td colspan="6"></td><td class="s"><pre>=head1 NAME

ExtUtils::ModuleMaker::Auxiliary - Subroutines for testing ExtUtils::ModuleMaker

=head1 DESCRIPTION

This package contains subroutines used in one or more F&lt;t/*.t&gt; files in
ExtUtils::ModuleMaker&#39;s test suite.  They may prove useful in writing test
suites for distributions which subclass ExtUtils::ModuleMaker.

=head1 SUBROUTINES

=head2 C&lt;read_file_string()&gt;

    Function:   Read the contents of a file into a string.
    Argument:   String holding name of a file created by complete_build().
    Returns:    String holding text of the file read.
    Used:       To see whether text of files such as README, Makefile.PL,
                etc. was created correctly by returning a string against which
                a pattern can be matched.

=cut</pre></td></tr>
<tr><td class="h">66</td><td colspan="7"></td></tr><tr><td class="h">67</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub read_file_string {</td></tr>
<tr><td class="h">68</td><td><div class="c3">89</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L68">89</a></div></td><td><div class="c3">1</div></td><td><div>1654</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $file = shift;</td></tr>
<tr><td class="h">69</td><td><div class="c3">89</div></td><td><div class="c0" title="-/F"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L69">50</a></div></td><td></td><td></td><td></td><td><div>4588</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;open my $fh, $file or die &quot;Unable to open filehandle: $!&quot;;</td></tr>
<tr><td class="h">70</td><td><div class="c3">89</div><div class="c3">89</div><div class="c3">89</div></td><td></td><td></td><td></td><td></td><td><div>1211</div><div>970</div><div>9563</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $filetext = do { local $/; &lt;$fh&gt; };</td></tr>
<tr><td class="h">71</td><td><div class="c3">89</div></td><td><div class="c0" title="-/F"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L71">50</a></div></td><td></td><td></td><td></td><td><div>2973</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;close $fh or die &quot;Unable to close filehandle: $!&quot;;</td></tr>
<tr><td class="h">72</td><td><div class="c3">89</div></td><td></td><td></td><td></td><td></td><td><div>1340</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $filetext;</td></tr>
<tr><td class="h">73</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">74</td><td colspan="7"></td></tr><tr><td class="h">75 - 84</td><td colspan="6"></td><td class="s"><pre>=head2 C&lt;read_file_array()&gt;

    Function:   Read a file line-by-line  into an array.
    Argument:   String holding name of a file created by complete_build().
    Returns:    Array holding the lines of the file read.
    Used:       To see whether text of files such as README, Makefile.PL,
                etc. was created correctly by returning an array against whose 
                elements patterns can be matched.

=cut</pre></td></tr>
<tr><td class="h">85</td><td colspan="7"></td></tr><tr><td class="h">86</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub read_file_array {</td></tr>
<tr><td class="h">87</td><td><div class="c3">12</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L87">12</a></div></td><td><div class="c3">1</div></td><td><div>102</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $file = shift;</td></tr>
<tr><td class="h">88</td><td><div class="c3">12</div></td><td><div class="c0" title="-/F"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L88">50</a></div></td><td></td><td></td><td></td><td><div>2071</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;open my $fh, $file or die &quot;Unable to open filehandle: $!&quot;;</td></tr>
<tr><td class="h">89</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>1320</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @filetext = &lt;$fh&gt;;</td></tr>
<tr><td class="h">90</td><td><div class="c3">12</div></td><td><div class="c0" title="-/F"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L90">50</a></div></td><td></td><td></td><td></td><td><div>1569</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;close $fh or die &quot;Unable to close filehandle: $!&quot;;</td></tr>
<tr><td class="h">91</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>78</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @filetext;</td></tr>
<tr><td class="h">92</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">93</td><td colspan="7"></td></tr><tr><td class="h">94 - 113</td><td colspan="6"></td><td class="s"><pre>=head2 C&lt;six_file_tests()&gt;

    Function:   Verify that content of MANIFEST and lib/*.pm were created
                correctly.
    Argument:   Two arguments:
                1.  A number predicting the number of entries in the MANIFEST.
                2.  The stem of the lib/*.pm file, i.e., what immediately
                    precedes the .pm.
    Returns:    n/a.
    Used:       To see whether MANIFEST and lib/*.pm have correct text.  
                Runs 6 Test::More tests:
                1.  Number of entries in MANIFEST.
                2.  Change to directory under lib.
                3.  Applies read_file_string to the stem.pm file.
                4.  Determine whether stem.pm&#39;s POD contains module name and
                    abstract.
                5.  Determine whether POD contains a HISTORY head.
                6.  Determine whether POD contains correct author information.

=cut</pre></td></tr>
<tr><td class="h">114</td><td colspan="7"></td></tr><tr><td class="h">115</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub six_file_tests {</td></tr>
<tr><td class="h">116</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L116">4</a></div></td><td><div class="c3">1</div></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($manifest_entries, $testmod) = @_;</td></tr>
<tr><td class="h">117</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @filetext = read_file_array(&#39;MANIFEST&#39;);</td></tr>
<tr><td class="h">118</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>103</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;is(scalar(@filetext), $manifest_entries,</td></tr>
<tr><td class="h">119</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;Correct number of entries in MANIFEST&#39;);</td></tr>
<tr><td class="h">120</td><td colspan="7"></td></tr><tr><td class="h">121</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $str;</td></tr>
<tr><td class="h">122</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok(chdir &#39;lib/Alpha&#39;, &#39;Directory is now lib/Alpha&#39;);</td></tr>
<tr><td class="h">123</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>432</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok($str = read_file_string(&quot;$testmod.pm&quot;),</td></tr>
<tr><td class="h">124</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Able to read $testmod.pm&quot;);</td></tr>
<tr><td class="h">125</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>493</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok($str =~ m|Alpha::$testmod\s-\sTest\sof\sthe\scapacities\sof\sEU::MM|,</td></tr>
<tr><td class="h">126</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;POD contains module name and abstract&#39;);</td></tr>
<tr><td class="h">127</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>111</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok($str =~ m|=head1\sHISTORY|,</td></tr>
<tr><td class="h">128</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;POD contains history head&#39;);</td></tr>
<tr><td class="h">129</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>77</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok($str =~ m|</td></tr>
<tr><td class="h">130</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Phineas\sT\.\sBluster\n</td></tr>
<tr><td class="h">131</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\s+CPAN\sID:\s+PTBLUSTER\n</td></tr>
<tr><td class="h">132</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\s+Peanut\sGallery\n</td></tr>
<tr><td class="h">133</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\s+phineas\@anonymous\.com\n</td></tr>
<tr><td class="h">134</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\s+http:\/\/www\.anonymous\.com\/~phineas</td></tr>
<tr><td class="h">135</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|xs,</td></tr>
<tr><td class="h">136</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;POD contains correct author info&#39;);</td></tr>
<tr><td class="h">137</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">} </td></tr>
<tr><td class="h">138</td><td colspan="7"></td></tr><tr><td class="h">139 - 152</td><td colspan="6"></td><td class="s"><pre>=head2 C&lt;check_MakefilePL()&gt;

    Function:   Verify that content of Makefile.PL was created correctly.
    Argument:   Two arguments:
                1.  A string holding the directory in which the Makefile.PL
                    should have been created.
                2.  A reference to an array holding strings each of which is a
                    prediction as to content of particular lines in Makefile.PL.
    Returns:    n/a.
    Used:       To see whether Makefile.PL created by complete_build() has
                correct entries.  Runs 1 Test::More test which checks NAME,
                VERSION_FROM, AUTHOR and ABSTRACT.  

=cut</pre></td></tr>
<tr><td class="h">153</td><td colspan="7"></td></tr><tr><td class="h">154</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub check_MakefilePL {</td></tr>
<tr><td class="h">155</td><td><div class="c3">11</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L155">11</a></div></td><td><div class="c3">1</div></td><td><div>110</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($topdir, $predictref) = @_;</td></tr>
<tr><td class="h">156</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>197</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @pred = @$predictref;</td></tr>
<tr><td class="h">157</td><td colspan="7"></td></tr><tr><td class="h">158</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>2079</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $mkfl = File::Spec-&gt;catfile( $topdir, q{Makefile.PL} );</td></tr>
<tr><td class="h">159</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>743</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local *MAK;</td></tr>
<tr><td class="h">160</td><td><div class="c3">11</div></td><td><div class="c0" title="-/F"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L160">50</a></div></td><td></td><td></td><td></td><td><div>3070</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;open MAK, $mkfl or die &quot;Unable to open Makefile.PL: $!&quot;;</td></tr>
<tr><td class="h">161</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>214</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $bigstr = read_file_string($mkfl);</td></tr>
<tr><td class="h">162</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>4276</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;like($bigstr, qr/</td></tr>
<tr><td class="h">163</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NAME.+($pred[0]).+</td></tr>
<tr><td class="h">164</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VERSION_FROM.+($pred[1]).+</td></tr>
<tr><td class="h">165</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AUTHOR.+($pred[2]).+</td></tr>
<tr><td class="h">166</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($pred[3]).+</td></tr>
<tr><td class="h">167</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ABSTRACT.+($pred[4]).+</td></tr>
<tr><td class="h">168</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/sx, &quot;Makefile.PL has predicted values&quot;);</td></tr>
<tr><td class="h">169</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">170</td><td colspan="7"></td></tr><tr><td class="h">171</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub check_pm_file {</td></tr>
<tr><td class="h">172</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L172">2</a></div></td><td><div class="c0">0</div></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($pmfile, $predictref) = @_;</td></tr>
<tr><td class="h">173</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %pred = %$predictref;</td></tr>
<tr><td class="h">174</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @pmlines;</td></tr>
<tr><td class="h">175</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@pmlines = read_file_array($pmfile);</td></tr>
<tr><td class="h">176</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>575</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok( scalar(@pmlines), &quot;.pm file has content&quot;);</td></tr>
<tr><td class="h">177</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L177">100</a></div></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined $pred{&#39;pod_present&#39;}) {</td></tr>
<tr><td class="h">178</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>215</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pod_present(\@pmlines, \%pred);</td></tr>
<tr><td class="h">179</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">180</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L180">100</a></div></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined $pred{&#39;constructor_present&#39;}) {</td></tr>
<tr><td class="h">181</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor_present(\@pmlines, \%pred);</td></tr>
<tr><td class="h">182</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">183</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">184</td><td colspan="7"></td></tr><tr><td class="h">185</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub make_compact {</td></tr>
<tr><td class="h">186</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L186">3</a></div></td><td><div class="c0">0</div></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $module_name = shift;</td></tr>
<tr><td class="h">187</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($topdir, $path, $pmfile);</td></tr>
<tr><td class="h">188</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$topdir = $path = $module_name;</td></tr>
<tr><td class="h">189</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$topdir =~ s{::}{-}g;</td></tr>
<tr><td class="h">190</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$path   =~ s{::}{/}g;</td></tr>
<tr><td class="h">191</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>432</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$path .= q{.pm};</td></tr>
<tr><td class="h">192</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>1073</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$pmfile = File::Spec-&gt;catfile( $topdir, q{lib}, $path );</td></tr>
<tr><td class="h">193</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ($topdir, $pmfile);</td></tr>
<tr><td class="h">194</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">195</td><td colspan="7"></td></tr><tr><td class="h">196</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub pod_present {</td></tr>
<tr><td class="h">197</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L197">1</a></div></td><td><div class="c0">0</div></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $linesref = shift;</td></tr>
<tr><td class="h">198</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $predictref = shift;</td></tr>
<tr><td class="h">199</td><td><div class="c3">1</div><div class="c3">28</div><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>7</div><div>666</div><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $podcount  = grep {/^=(head|cut)/} @{$linesref};</td></tr>
<tr><td class="h">200</td><td><div class="c3">1</div><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L200">50</a></div></td><td></td><td></td><td></td><td><div>9</div><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (${$predictref}{&#39;pod_present&#39;} == 0) {  </td></tr>
<tr><td class="h">201</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is( $podcount, 0, &quot;no POD correctly detected in module&quot;);</td></tr>
<tr><td class="h">202</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">203</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isnt( $podcount, 0, &quot;POD detected in module&quot;);</td></tr>
<tr><td class="h">204</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">205</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">206</td><td colspan="7"></td></tr><tr><td class="h">207</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub constructor_present {</td></tr>
<tr><td class="h">208</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L208">1</a></div></td><td><div class="c0">0</div></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $linesref = shift;</td></tr>
<tr><td class="h">209</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $predictref = shift;</td></tr>
<tr><td class="h">210</td><td><div class="c3">1</div><div class="c3">80</div><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>7</div><div>1966</div><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $constructorcount  = grep {/^=sub new/} @{$linesref};</td></tr>
<tr><td class="h">211</td><td><div class="c3">1</div><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L211">50</a></div></td><td></td><td></td><td></td><td><div>14</div><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (${$predictref}{&#39;constructor_present&#39;} == 0) {  </td></tr>
<tr><td class="h">212</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is( $constructorcount, 0, &quot;constructor correctly absent from module&quot;);</td></tr>
<tr><td class="h">213</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">214</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isnt( $constructorcount, 0, &quot;constructor correctly present in module&quot;);</td></tr>
<tr><td class="h">215</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">216</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">217</td><td colspan="7"></td></tr><tr><td class="h">218</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub failsafe {</td></tr>
<tr><td class="h">219</td><td><div class="c3">11</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L219">11</a></div></td><td><div class="c0">0</div></td><td><div>147</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($caller, $argslistref, $pattern, $message) = @_;</td></tr>
<tr><td class="h">220</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>86</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($tdir, $obj);</td></tr>
<tr><td class="h">221</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>328</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tdir = tempdir( CLEANUP =&gt; 1);</td></tr>
<tr><td class="h">222</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>1736</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok(chdir $tdir, &#39;changed to temp directory for testing&#39;);</td></tr>
<tr><td class="h">223</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>89</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $@ = undef;</td></tr>
<tr><td class="h">224</td><td><div class="c3">11</div><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>477</div><div>661</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;eval { $obj  = $caller-&gt;new (@$argslistref); };</td></tr>
<tr><td class="h">225</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>1192</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;like($@, qr/$pattern/, $message);</td></tr>
<tr><td class="h">226</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">227</td><td colspan="7"></td></tr><tr><td class="h">228</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub licensetest {</td></tr>
<tr><td class="h">229</td><td><div class="c3">41</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L229">41</a></div></td><td><div class="c0">0</div></td><td><div>749</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($caller, $license, $pattern) = @_;</td></tr>
<tr><td class="h">230</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td></td><td><div>392</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($tdir, $mod);</td></tr>
<tr><td class="h">231</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td></td><td><div>1644</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tdir = tempdir( CLEANUP =&gt; 1);</td></tr>
<tr><td class="h">232</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td></td><td><div>2696</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok(chdir $tdir, &quot;changed to temp directory for testing $license&quot;);</td></tr>
<tr><td class="h">233</td><td colspan="7"></td></tr><tr><td class="h">234</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td></td><td><div>1914</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok($mod = $caller-&gt;new(</td></tr>
<tr><td class="h">235</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NAME      =&gt; &quot;Alpha::$license&quot;,</td></tr>
<tr><td class="h">236</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LICENSE   =&gt; $license,</td></tr>
<tr><td class="h">237</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COMPACT   =&gt; 1,</td></tr>
<tr><td class="h">238</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;), &quot;object for module Alpha::$license created&quot;);</td></tr>
<tr><td class="h">239</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td></td><td><div>1632</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok( $mod-&gt;complete_build(), &#39;call complete_build()&#39; );</td></tr>
<tr><td class="h">240</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td></td><td><div>910</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok(chdir &quot;Alpha-$license&quot;, &quot;changed to Alpha-$license directory&quot;);</td></tr>
<tr><td class="h">241</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td></td><td><div>1042</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $licensetext = read_file_string(&#39;LICENSE&#39;);</td></tr>
<tr><td class="h">242</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td></td><td><div>1564</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;like($licensetext, $pattern, &quot;$license license has predicted content&quot;);</td></tr>
<tr><td class="h">243</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">244</td><td colspan="7"></td></tr><tr><td class="h">245</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _process_personal_defaults_file {</td></tr>
<tr><td class="h">246</td><td><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L246">95</a></div></td><td></td><td><div>1695</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($mmkr_dir, $pers_file) = @_;</td></tr>
<tr><td class="h">247</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>913</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pers_file_hidden = $pers_file . &#39;.hidden&#39;;</td></tr>
<tr><td class="h">248</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>1309</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %pers;</td></tr>
<tr><td class="h">249</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>1566</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$pers{full} = File::Spec-&gt;catfile( $mmkr_dir, $pers_file );</td></tr>
<tr><td class="h">250</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>3759</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$pers{hidden} = File::Spec-&gt;catfile( $mmkr_dir, $pers_file_hidden );</td></tr>
<tr><td class="h">251</td><td><div class="c3">95</div></td><td><div class="c0" title="-/F"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L251">50</a></div></td><td></td><td></td><td></td><td><div>2637</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (-f $pers{full}) {</td></tr>
<tr><td class="h">252</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pers{atime}   = (stat($pers{full}))[8];</td></tr>
<tr><td class="h">253</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pers{modtime} = (stat($pers{full}))[9];</td></tr>
<tr><td class="h">254</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L254">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rename $pers{full},</td></tr>
<tr><td class="h">255</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pers{hidden}</td></tr>
<tr><td class="h">256</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or croak &quot;Unable to rename $pers{full}: $!&quot;;</td></tr>
<tr><td class="h">257</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok(! -f $pers{full}, </td></tr>
<tr><td class="h">258</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;personal defaults file temporarily suppressed&quot;);</td></tr>
<tr><td class="h">259</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok(-f $pers{hidden}, </td></tr>
<tr><td class="h">260</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;personal defaults file now hidden&quot;);</td></tr>
<tr><td class="h">261</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">262</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>1555</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok(! -f $pers{full}, </td></tr>
<tr><td class="h">263</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;personal defaults file not found&quot;);</td></tr>
<tr><td class="h">264</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>4419</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok(1, &quot;personal defaults file not found&quot;);</td></tr>
<tr><td class="h">265</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">266</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>4482</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return { %pers };</td></tr>
<tr><td class="h">267</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">268</td><td colspan="7"></td></tr><tr><td class="h">269</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _reprocess_personal_defaults_file {</td></tr>
<tr><td class="h">270</td><td><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L270">95</a></div></td><td></td><td><div>2235</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pers_def_ref = shift;;</td></tr>
<tr><td class="h">271</td><td><div class="c3">95</div></td><td><div class="c0" title="-/F"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L271">50</a></div></td><td></td><td></td><td></td><td><div>3444</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(-f $pers_def_ref-&gt;{hidden} ) {</td></tr>
<tr><td class="h">272</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L272">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rename $pers_def_ref-&gt;{hidden},</td></tr>
<tr><td class="h">273</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pers_def_ref-&gt;{full},</td></tr>
<tr><td class="h">274</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or croak &quot;Unable to rename $pers_def_ref-&gt;{hidden}: $!&quot;;</td></tr>
<tr><td class="h">275</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok(-f $pers_def_ref-&gt;{full}, </td></tr>
<tr><td class="h">276</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;personal defaults file re-established&quot;);</td></tr>
<tr><td class="h">277</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok(! -f $pers_def_ref-&gt;{hidden}, </td></tr>
<tr><td class="h">278</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;hidden personal defaults now gone&quot;);</td></tr>
<tr><td class="h">279</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok( (utime $pers_def_ref-&gt;{atime}, </td></tr>
<tr><td class="h">280</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pers_def_ref-&gt;{modtime}, </td></tr>
<tr><td class="h">281</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($pers_def_ref-&gt;{full})</td></tr>
<tr><td class="h">282</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;), &quot;atime and modtime of personal defaults file restored&quot;);</td></tr>
<tr><td class="h">283</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">284</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>3175</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok(1, &quot;test not relevant&quot;);</td></tr>
<tr><td class="h">285</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>3766</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok(1, &quot;test not relevant&quot;);</td></tr>
<tr><td class="h">286</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>3133</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok(1, &quot;test not relevant&quot;);</td></tr>
<tr><td class="h">287</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">288</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">289</td><td colspan="7"></td></tr><tr><td class="h">290</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _get_els {</td></tr>
<tr><td class="h">291</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L291">6</a></div></td><td></td><td><div>381</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $persref = shift;</td></tr>
<tr><td class="h">292</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>87</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %pers = %$persref;</td></tr>
<tr><td class="h">293</td><td><div class="c3">6</div><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>377</div><div>61</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %pm = %{$pers{pm}};</td></tr>
<tr><td class="h">294</td><td><div class="c3">6</div><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>41</div><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %hidden = %{$pers{hidden}};</td></tr>
<tr><td class="h">295</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>81</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ( pm =&gt; scalar(keys %pm), hidden =&gt; scalar(keys %hidden) );</td></tr>
<tr><td class="h">296</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">297</td><td colspan="7"></td></tr><tr><td class="h">298</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _subclass_preparatory_tests {</td></tr>
<tr><td class="h">299</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L299">2</a></div></td><td></td><td><div>728</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $odir = shift;</td></tr>
<tr><td class="h">300</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tdir = tempdir( CLEANUP =&gt; 1);</td></tr>
<tr><td class="h">301</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>78</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok(chdir $tdir, &#39;changed to temp directory for testing&#39;);</td></tr>
<tr><td class="h">302</td><td colspan="7"></td></tr><tr><td class="h">303</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $mmkr_dir_ref = get_subhome_directory_status(&quot;.modulemaker&quot;);</td></tr>
<tr><td class="h">304</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>88</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $mmkr_dir = make_subhome_directory($mmkr_dir_ref);</td></tr>
<tr><td class="h">305</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>2513</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok($mmkr_dir, &quot;home/.modulemaker directory now present on system&quot;);</td></tr>
<tr><td class="h">306</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $eumm = File::Spec-&gt;catfile( qw| ExtUtils ModuleMaker | );</td></tr>
<tr><td class="h">307</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $eumm_dir = File::Spec-&gt;catfile( $mmkr_dir, $eumm );</td></tr>
<tr><td class="h">308</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L308">50</a></div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless (-d $eumm_dir) {</td></tr>
<tr><td class="h">309</td><td><div class="c3">2</div></td><td><div class="c0" title="-/F"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L309">50</a></div></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkpath($eumm_dir) or croak &quot;Unable to make path: $!&quot;;</td></tr>
<tr><td class="h">310</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">311</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>2048</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok(-d $eumm_dir, &quot;eumm directory now exists&quot;);</td></tr>
<tr><td class="h">312</td><td colspan="7"></td></tr><tr><td class="h">313</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>355</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pers_file = &quot;ExtUtils/ModuleMaker/Personal/Defaults.pm&quot;;</td></tr>
<tr><td class="h">314</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pers_def_ref = </td></tr>
<tr><td class="h">315</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_process_personal_defaults_file( $mmkr_dir, $pers_file );</td></tr>
<tr><td class="h">316</td><td colspan="7"></td></tr><tr><td class="h">317</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $persref;</td></tr>
<tr><td class="h">318</td><td colspan="7"></td></tr><tr><td class="h">319</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$persref = _identify_pm_files_under_mmkr_dir($eumm_dir);</td></tr>
<tr><td class="h">320</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>93</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %els1 = _get_els($persref);</td></tr>
<tr><td class="h">321</td><td colspan="7"></td></tr><tr><td class="h">322</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_hide_pm_files_under_mmkr_dir($persref);</td></tr>
<tr><td class="h">323</td><td colspan="7"></td></tr><tr><td class="h">324</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$persref = _identify_pm_files_under_mmkr_dir($eumm_dir);</td></tr>
<tr><td class="h">325</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %els2 = _get_els($persref);</td></tr>
<tr><td class="h">326</td><td colspan="7"></td></tr><tr><td class="h">327</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L327">50</a></div><div class="c0" title="-/-"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L327">0</a></div></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (! $els1{pm}) {</td></tr>
<tr><td class="h">328</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is($els1{pm}, $els2{pm}, </td></tr>
<tr><td class="h">329</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;no .pm files originally, so no .pm files now&quot;);</td></tr>
<tr><td class="h">330</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is($els1{pm}, $els2{hidden}, </td></tr>
<tr><td class="h">331</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;no .pm files originally, so no .pm.hidden files now&quot;);</td></tr>
<tr><td class="h">332</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif ($els1{pm}) {</td></tr>
<tr><td class="h">333</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is($els2{pm}, 0,</td></tr>
<tr><td class="h">334</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;original .pm files are now hidden&quot;);</td></tr>
<tr><td class="h">335</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is($els1{pm}, $els2{hidden},</td></tr>
<tr><td class="h">336</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;.pm.hidden files exist&quot;);</td></tr>
<tr><td class="h">337</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">338</td><td colspan="7"></td></tr><tr><td class="h">339</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $sourcedir = File::Spec-&gt;catdir( $odir, q{t}, q{testlib}, $eumm );</td></tr>
<tr><td class="h">340</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>1188</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok( -d $sourcedir, &quot;source directory exists&quot;);</td></tr>
<tr><td class="h">341</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok( -d $eumm_dir, &quot;destination directory exists&quot;);</td></tr>
<tr><td class="h">342</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return {</td></tr>
<tr><td class="h">343</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>415</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mmkr_dir_ref     =&gt; $mmkr_dir_ref,</td></tr>
<tr><td class="h">344</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;persref          =&gt; $persref,</td></tr>
<tr><td class="h">345</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pers_def_ref     =&gt; $pers_def_ref,</td></tr>
<tr><td class="h">346</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial_els_ref  =&gt; \%els1,</td></tr>
<tr><td class="h">347</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourcedir        =&gt; $sourcedir,</td></tr>
<tr><td class="h">348</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eumm_dir         =&gt; $eumm_dir,</td></tr>
<tr><td class="h">349</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">350</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">351</td><td colspan="7"></td></tr><tr><td class="h">352</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _subclass_cleanup_tests {</td></tr>
<tr><td class="h">353</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L353">2</a></div></td><td></td><td><div>347</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cleanup_ref = shift;</td></tr>
<tr><td class="h">354</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $persref         = $cleanup_ref-&gt;{persref};</td></tr>
<tr><td class="h">355</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pers_def_ref    = $cleanup_ref-&gt;{pers_def_ref};</td></tr>
<tr><td class="h">356</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $eumm_dir        = $cleanup_ref-&gt;{eumm_dir};</td></tr>
<tr><td class="h">357</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>15</div><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %els1            = %{ $cleanup_ref-&gt;{initial_els_ref} };</td></tr>
<tr><td class="h">358</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $odir            = $cleanup_ref-&gt;{odir}; </td></tr>
<tr><td class="h">359</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $mmkr_dir_ref    = $cleanup_ref-&gt;{mmkr_dir_ref};</td></tr>
<tr><td class="h">360</td><td colspan="7"></td></tr><tr><td class="h">361</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_reveal_pm_files_under_mmkr_dir($persref);</td></tr>
<tr><td class="h">362</td><td colspan="7"></td></tr><tr><td class="h">363</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>625</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$persref = _identify_pm_files_under_mmkr_dir($eumm_dir);</td></tr>
<tr><td class="h">364</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %els3 = _get_els($persref);</td></tr>
<tr><td class="h">365</td><td colspan="7"></td></tr><tr><td class="h">366</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L366">50</a></div><div class="c0" title="-/-"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L366">0</a></div></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (! $els1{pm}) {</td></tr>
<tr><td class="h">367</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>632</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is($els1{pm}, $els3{pm}, </td></tr>
<tr><td class="h">368</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;no .pm files originally, so no .pm files now&quot;);</td></tr>
<tr><td class="h">369</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is($els1{pm}, $els3{hidden}, </td></tr>
<tr><td class="h">370</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;no .pm files originally, so no .pm.hidden files now&quot;);</td></tr>
<tr><td class="h">371</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif ($els1{pm}) {</td></tr>
<tr><td class="h">372</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is($els1{pm}, $els3{pm},</td></tr>
<tr><td class="h">373</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;same number of .pm files as originally&quot;);</td></tr>
<tr><td class="h">374</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is($els3{hidden}, 0,</td></tr>
<tr><td class="h">375</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;no more .pm.hidden files&quot;);</td></tr>
<tr><td class="h">376</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">377</td><td colspan="7"></td></tr><tr><td class="h">378</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_reprocess_personal_defaults_file($pers_def_ref);</td></tr>
<tr><td class="h">379</td><td colspan="7"></td></tr><tr><td class="h">380</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>367</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok(chdir $odir, &#39;changed back to original directory after testing&#39;);</td></tr>
<tr><td class="h">381</td><td colspan="7"></td></tr><tr><td class="h">382</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok( restore_subhome_directory_status($mmkr_dir_ref),</td></tr>
<tr><td class="h">383</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;original presence/absence of .modulemaker directory restored&quot;);</td></tr>
<tr><td class="h">384</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">385</td><td colspan="7"></td></tr><tr><td class="h">386</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _identify_pm_files_under_mmkr_dir {</td></tr>
<tr><td class="h">387</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L387">6</a></div></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $eumm_dir = shift;</td></tr>
<tr><td class="h">388</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my (@pm_files, @pm_files_hidden);</td></tr>
<tr><td class="h">389</td><td><div class="c3">6</div></td><td><div class="c0" title="-/F"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L389">50</a></div></td><td></td><td></td><td></td><td><div>1582</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;opendir my $dirh, $eumm_dir </td></tr>
<tr><td class="h">390</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or croak &quot;Unable to open $eumm_dir for reading: $!&quot;;</td></tr>
<tr><td class="h">391</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>149</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while (my $f = readdir($dirh)) {</td></tr>
<tr><td class="h">392</td><td><div class="c3">12</div></td><td><div class="c0" title="-/F"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L392">50</a></div><div class="c0" title="-/F"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L392">50</a></div></td><td></td><td></td><td></td><td><div>820</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($f =~ /\.pm$/) {</td></tr>
<tr><td class="h">393</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @pm_files, File::Spec-&gt;catfile( $eumm_dir, $f );</td></tr>
<tr><td class="h">394</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif ($f =~ /\.pm\.hidden$/) {</td></tr>
<tr><td class="h">395</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @pm_files_hidden, File::Spec-&gt;catfile( $eumm_dir, $f );</td></tr>
<tr><td class="h">396</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">397</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>494</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">398</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">399</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">400</td><td><div class="c3">6</div></td><td><div class="c0" title="-/F"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L400">50</a></div></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;closedir $dirh or croak &quot;Unable to close $eumm_dir after reading: $!&quot;;</td></tr>
<tr><td class="h">401</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# sanity check:</td></tr>
<tr><td class="h">402</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If there are .pm files, there should be no .pm.hidden files</td></tr>
<tr><td class="h">403</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# and vice versa.</td></tr>
<tr><td class="h">404</td><td><div class="c3">6</div></td><td><div class="c0" title="-/F"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L404">50</a></div></td><td><div class="c0"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--condition.html#L404">50</a></div></td><td></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( scalar(@pm_files) and scalar(@pm_files_hidden) )  {</td></tr>
<tr><td class="h">405</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;croak &quot;Both .pm and .pm.hidden files found in $eumm_dir: $!&quot;;</td></tr>
<tr><td class="h">406</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">407</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %pers;</td></tr>
<tr><td class="h">408</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %pm;</td></tr>
<tr><td class="h">409</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>419</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $f (@pm_files) {</td></tr>
<tr><td class="h">410</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pm{$f}{atime}   = (stat($f))[8];</td></tr>
<tr><td class="h">411</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pm{$f}{modtime} = (stat($f))[9];</td></tr>
<tr><td class="h">412</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">413</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %hidden;</td></tr>
<tr><td class="h">414</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $f (@pm_files_hidden) {</td></tr>
<tr><td class="h">415</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$hidden{$f}{atime}   = (stat($f))[8];</td></tr>
<tr><td class="h">416</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$hidden{$f}{modtime} = (stat($f))[9];</td></tr>
<tr><td class="h">417</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">418</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$pers{dir}    = $eumm_dir;;</td></tr>
<tr><td class="h">419</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$pers{pm}     = \%pm;</td></tr>
<tr><td class="h">420</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$pers{hidden} = \%hidden;</td></tr>
<tr><td class="h">421</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>347</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return \%pers;</td></tr>
<tr><td class="h">422</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">423</td><td colspan="7"></td></tr><tr><td class="h">424</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _hide_pm_files_under_mmkr_dir {</td></tr>
<tr><td class="h">425</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L425">2</a></div></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $per_dir_ref = shift;</td></tr>
<tr><td class="h">426</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>14</div><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %pers = %{$per_dir_ref};</td></tr>
<tr><td class="h">427</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>14</div><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %pm = %{$pers{pm}};</td></tr>
<tr><td class="h">428</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>98</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $f (keys %pm) {</td></tr>
<tr><td class="h">429</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $new = &quot;$f.hidden&quot;;</td></tr>
<tr><td class="h">430</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L430">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rename $f, $new or croak &quot;Unable to rename $f: $!&quot;;</td></tr>
<tr><td class="h">431</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;utime $pm{$f}{atime}, $pm{$f}{modtime}, $new;</td></tr>
<tr><td class="h">432</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">433</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">434</td><td colspan="7"></td></tr><tr><td class="h">435</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _reveal_pm_files_under_mmkr_dir {</td></tr>
<tr><td class="h">436</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L436">2</a></div></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $per_dir_ref = shift;</td></tr>
<tr><td class="h">437</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>15</div><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %pers = %{$per_dir_ref};</td></tr>
<tr><td class="h">438</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>16</div><div>358</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %hidden = %{$pers{hidden}};</td></tr>
<tr><td class="h">439</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $f (keys %hidden) {</td></tr>
<tr><td class="h">440</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$f =~ m{(.*)\.hidden$};</td></tr>
<tr><td class="h">441</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $new = $1;</td></tr>
<tr><td class="h">442</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--branch.html#L442">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rename $f, $new or croak &quot;Unable to rename $f: $!&quot;;</td></tr>
<tr><td class="h">443</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;utime $hidden{$f}{atime}, $hidden{$f}{modtime}, $new;</td></tr>
<tr><td class="h">444</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">445</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">446</td><td colspan="7"></td></tr><tr><td class="h">447</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _save_pretesting_status {</td></tr>
<tr><td class="h">448</td><td><div class="c3">93</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L448">93</a></div></td><td></td><td><div>991</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $mmkr_dir_ref = get_subhome_directory_status(&quot;.modulemaker&quot;);</td></tr>
<tr><td class="h">449</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>1183</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $mmkr_dir = make_subhome_directory($mmkr_dir_ref);</td></tr>
<tr><td class="h">450</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>1745</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok( $mmkr_dir, &quot;personal defaults directory now present on system&quot;);</td></tr>
<tr><td class="h">451</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>4262</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pers_file = &quot;ExtUtils/ModuleMaker/Personal/Defaults.pm&quot;;</td></tr>
<tr><td class="h">452</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>864</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pers_def_ref = _process_personal_defaults_file(</td></tr>
<tr><td class="h">453</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$mmkr_dir, </td></tr>
<tr><td class="h">454</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pers_file,</td></tr>
<tr><td class="h">455</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">456</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return {</td></tr>
<tr><td class="h">457</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>3183</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cwd             =&gt; cwd(),</td></tr>
<tr><td class="h">458</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mmkr_dir_ref    =&gt; $mmkr_dir_ref,</td></tr>
<tr><td class="h">459</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pers_def_ref    =&gt; $pers_def_ref,</td></tr>
<tr><td class="h">460</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mmkr_dir        =&gt; $mmkr_dir,   # needed in make_selections_defaults</td></tr>
<tr><td class="h">461</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pers_file       =&gt; $pers_file,  # needed in make_selections_defaults</td></tr>
<tr><td class="h">462</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">463</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">464</td><td colspan="7"></td></tr><tr><td class="h">465</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _restore_pretesting_status {</td></tr>
<tr><td class="h">466</td><td><div class="c3">93</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-ExtUtils-ModuleMaker-Auxiliary-pm--subroutine.html#L466">93</a></div></td><td></td><td><div>1077</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $statusref = shift;</td></tr>
<tr><td class="h">467</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>4753</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_reprocess_personal_defaults_file($statusref-&gt;{pers_def_ref});</td></tr>
<tr><td class="h">468</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>3831</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok(chdir $statusref-&gt;{cwd},</td></tr>
<tr><td class="h">469</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;changed back to original directory after testing&quot;);</td></tr>
<tr><td class="h">470</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>6362</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ok( restore_subhome_directory_status($statusref-&gt;{mmkr_dir_ref}),</td></tr>
<tr><td class="h">471</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;original presence/absence of .modulemaker directory restored&quot;);</td></tr>
<tr><td class="h">472</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">473</td><td colspan="7"></td></tr><tr><td class="h">474 - 478</td><td colspan="6"></td><td class="s"><pre>=head1 SEE ALSO

F&lt;ExtUtils::ModuleMaker&gt;.

=cut</pre></td></tr>
<tr><td class="h">479</td><td colspan="7"></td></tr><tr><td class="h">480</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
<tr><td class="h">481</td><td colspan="7"></td></tr></table>
</body>
</html>
